<g class="module-instance">
  <path 
    ng-if="convexHull!=null"
    ng-attr-d="{{ convexHull | pathify }}"
    ng-class="{ 'convex-hull': true, selected: isSelected }"
    bp-draggable="data"
    on-selection-changed="selectionChanged($selected)"
    />
  <g 
    ng-repeat="node in data.module.nodes" 
    ng-attr-transform="{{ 'translate('+node.position.coordinates[0]+' '+node.position.coordinates[1]+')' }}"
    ng-switch="node.className"
    >
    <bp-module-instance ng-switch-when="ModuleInstance" instance="node" editable="false"></bp-module-instance>
    <bp-connectable-node ng-switch-default="" node="node" editable="{{canEdit}}"></bp-connectable-node>
  </g>  
  <g ng-repeat="connection in data.module.connections">
    <bp-connection connection="connection" editable="{{canEdit}}"/>
  </g>
</g>