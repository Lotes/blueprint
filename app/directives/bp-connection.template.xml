<g>
  <g ng-if="data.anchors != null &amp;&amp; data.anchors.length &gt; 0">
    <g ng-repeat="anchor in data.anchors">
      <line 
        class="connection"       
        ng-attr-x1="{{$first ? sourcePosition[0] : data.anchors[$index-1].position[0]}}" 
        ng-attr-y1="{{$first ? sourcePosition[1] : data.anchors[$index-1].position[1]}}" 
        ng-attr-x2="{{anchor.position[0]}}" 
        ng-attr-y2="{{anchor.position[1]}}" 
        />
      <bp-anchor anchor="anchor"/>
    </g>
    <line 
      class="connection" 
      ng-style="{ 'marker-end': 'url(#marker-connection-'+source.variables.type+')'}"
      ng-attr-x1="{{data.anchors[data.anchors.length-1].position[0]}}" 
      ng-attr-y1="{{data.anchors[data.anchors.length-1].position[1]}}" 
      ng-attr-x2="{{destinationPosition[0]}}" 
      ng-attr-y2="{{destinationPosition[1]}}" 
      />
  </g>
  <g ng-if="data.anchors == null || data.anchors.length == 0">
    <line 
      class="connection" 
      ng-style="{ 'marker-end': 'url(#marker-connection-'+source.variables.type+')'}"
      ng-attr-x1="{{sourcePosition[0]}}" 
      ng-attr-y1="{{sourcePosition[1]}}" 
      ng-attr-x2="{{destinationPosition[0]}}" 
      ng-attr-y2="{{destinationPosition[1]}}" 
      />
  </g>
</g>