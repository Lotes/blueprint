<svg ng-attr-width="{{width}}" ng-attr-height="{{height}}">
  <defs>
    <pattern id="grid-pattern" width="25" height="25" patternUnits="userSpaceOnUse">
      <rect x="0" y="0" width="25" height="25" class="grid-pattern" stroke-dasharray="2,2" stroke-width="0.5"/>
    </pattern>  
    <marker 
      id="marker-connection-activate" 
      markerWidth="10" 
      markerHeight="10"
      orient="auto" refY="5" refX="10">
      <path d="M0,0 L10,5 0,10" class="connection-tip-activate"/>
    </marker>
    <marker 
      id="marker-connection-inhibit" 
      markerWidth="15" 
      markerHeight="15"
      orient="auto" 
      refX="2"
      refY="7.5">
      <path d="M0,0 L 0,15" class="connection-tip-inhibit"/>
    </marker>
    <marker 
      id="marker-connection-associate" 
      markerWidth="10" 
      markerHeight="10"
      refX="10"
      refY="5"
      orient="auto">
      <circle cx="5" cy="5" r="5" class="connection-tip-associate"/>
    </marker>
    <marker 
      id="marker-connection-disassociate" 
      markerWidth="10" 
      markerHeight="10"
      refX="10"
      refY="5"
      orient="auto">
      <circle cx="5" cy="5" r="5" class="connection-tip-disassociate"/>
    </marker>
  </defs>
  
  <rect 
    class="grid" 
    x="0" 
    y="0"
    ng-attr-transform="{{ 'translate('+(-25+(width/2 + center[0])%25)+' '+(-25+(height/2 + center[1])%25)+')' }}"
    ng-attr-width="{{ width+50 }}" 
    ng-attr-height="{{ height+50 }}" 
    fill="url('#grid-pattern')"
  />  
  
  <g ng-attr-transform="{{ 'translate('+(width/2 + center[0])+' '+(height/2 + center[1])+')' }}">  
    <!-- origin  -->
    <circle class="origin" cx="0" cy="0" r="5"/>
    <line class="origin" x1="0" x2="0" y1="-10" y2="10"/>
    <line class="origin" x1="-10" x2="10" y1="0" y2="0"/>
    
    <bp-module-instance instance="rootInstance" editable="true"></bp-module-instance>
  </g>
  <rect 
      class="selection-rectangle"
      ng-if="showSelectionRectangle"
      ng-attr-x="{{ selectionRectangle[0] }}"
      ng-attr-y="{{ selectionRectangle[1] }}"
      ng-attr-width="{{ selectionRectangle[2] }}"
      ng-attr-height="{{ selectionRectangle[3] }}"
    />
</svg>